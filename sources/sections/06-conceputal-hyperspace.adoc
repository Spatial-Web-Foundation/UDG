[[section-conceptual-view-hyperspace]]
== UDG and hyperspace

=== Spatial Web Hyperspace

The concept of hyperspace is fundamental for the Spatial Web and an organizing method for entities in the UDG. To support this fundamental role, clause 6.2 of IEEE P2874 provides a formal definition of hyperspace, as any set whose elements are related by a formal notion of _path_.  The basic classes of hyperspace include: Graphs including Cellular spaces and Vector spaces with coordinate systems.

[[basic-classes-of-hyperspace]]
.Basic classes of hyperspace
image::hyperspace_basic_classes.png[Basic classes of hyperspace and their relationships]

<<IEEE_2874_2025, Spatial Web Protocol Architecture and Governance>> defines the following hyperspace concepts

* Classes of hyperspace: graphs, vector spaces, hypergraphs, abstract data types.  
* Hyperspaces of spaces: where a point of a space is a space of the corresponding type
* Cellular spaces: in which cells of a chosen type are connected according to a schema.
* Geographic spaces: locations relative to the Earth
* Time in hyperspace: as a dimension, as a duration, as a trajectory 
* Structures: origin, dimension, metric, similarity, norm and inner product
* Operations: products, sums, subspaces
* Connecting spaces: points in common to multiple subspaces, i.e., Portal.




Use of DGGS allows geographic Domains to be embedded as graphs in the Spatial Web UDG which is also a graph space.

=== DOMAIN locations in hyperspace

DOMAINS are represented in hyperspace by identifying the type of hyperspace and the location of the DOMAIN in the hyperspace.  

For Geographic DOMAINS, the hyperspace may be a geographic Coordinate Reference System (CRS) or a cellular space with an associated graph. Geographic space can be modelled as a particular kind of cellular space, called a _Discrete Global Grid System_ (DGGS), which typically models both three-dimensional physical space plus one time dimension. DGGSs therefore provide the Spatial Web with an approach for embedding geographic space into cellular or graphy hyperspace. The figure below illustrates a framework for the coordination of geographic DGGS and CRS with Spatial Web hyperspace.  Latitude and Longitude are examples of location in a CRS.  Alternatively, the ECEF Geographic CRS uses 3 orthogonal axis located at the center of the Earth.  

.Embedding geographic space in hyperspace
image::embedding_geo.jpeg[Embedding Geospatial in Hyperspace]

For Concept DOMAINS, the use of coordinates and graphs can be extended from geographic locations to conceptual locations.  The motivation for using a coordinate location for conceptual DOMAIN will be become apparent through spatial embedding.

=== Spatial embedding of Spatial Web entities

The Spatial Web defines space as hyperspace in order to represent many entity properties using a spatial embedding approach.   Spatial embedding: mathematical methods for representing data in a continuous, multi-dimensional vector space.
Spatial embedding was a key technology to the recent advances in LLM AI, see for example, Distributed Representations of Words and Phrases and their Compositionality, Mikolov, et.al. NIPS-2013

LLMs use spatial embedding for linguistic concepts, encoding words as vectors, also called  Word2Vec.  The Spatial Web uses spatial embedding for the Spatial Web ENTITIES.  One inspiration for this approach is World2Vec.   World2Vec was
an internal name for a project led by https://x.com/ylecun/status/1523018860731023361[Yann LeCunn]

Recent research has shown that features in LLM spatial embeddings may have universal applicability.

"Representing Features in Hyperspace Geography; Extracting Interpretable Features" is a study by https://transformer-circuits.pub/2024/scaling-monosemanticity/[Anthropic]. They found a diversity of highly abstract features in Claude 3. Examples of features they found include features for famous people, features for countries and cities. Many features are multilingual (responding to the same concept across languages) and multimodal (responding to the same concept in both text and
images), as well as encompassing both abstract and concrete instantiations of the same idea.

https://arxiv.org/pdf/2405.07987["The Platonic Representation Hypothesis", Huh, et.al. 2024],
observes that representations in AI models, particularly deep networks, are converging. Different neural networks representations are becoming more aligned. Convergence is occurring across modalities: vision models and language. This convergence is driving toward a shared statistical model of reality, akin to Plato's concept of an ideal reality.


=== Indexing Spatial Web graph entities using hyperspace embedding

The UDG KG contains a graph of Spatial Web Entities.  Spatial embedding of the world, e.g., World2Vec, results in generalized features in hypespace.

Development is needed along the lines of linking UDG KG entities with features in Coordinate Hyperspace.

This ability to go between graph and coordinate domains may provide a basis for semantic interoperabilty.

=== Hyperspace Entity Locators (HELs)

Vector emdedding occurs in a vector space.  Vector spaces are indexed using coordinate systems.  The coordinates are the index. Here a vector may have up to 1024 dimensions.

Geogrpahic space is indexed by Coordinate Reference Systems.  A CRS includes both a Coordinate System (CS) and a Datum.  The CS provides the dimensions and units.  The Datum anchors the abstract CS to the physical world.  Typically a Datum includes a benchmark plate at a specific location to which coordinates are assigned.  The assigned coordinates for that location allow for transformation to a CRS with a different datum.  (See ISO 19111, Referencing by coordinates)

A coordinate set such as latitude and longitude is ambigous unless a datum is
specified.  The GPS positioning system led to the most widely used family of
datums known as WGS-84.

By analogy, investigation is needed to determine if Hyperspace Reference System
(HRSs) can be defined for hyperspace coordinates systems using for Spatial Web
embedding.  CS systems for spatial embedding already exist.  Datums for Spatial
Web hyperspace HRSs are needed. The datums most likely will be based on
real-world semantics.  Real-world semantic datums may allow for transformation
between HRSs based on differing semantic datums.

With HRSs based on semantic datums defined, Hyperspace Entity Locators (HELs)
can be defined. Much like URLs locate based on hypertext, HELs would location an
ENTITY ased on an HRS.  HELs would locate ENTITIES in hyperspace.

With HRS and HEL defined, the ability to go from the UDG KG to Hyperspace can be
done.  ENTITIES in UDG KG would include an HEL to located it in hyperspace.
Thereby providing every KG ENTITY a locating in an HRS; and the locations could
be converted between HRSs.

It would be important to define HRS that are useful across many DOMAINS.

=== UDG size estimate

==== Summary Estimate

How big is the UDG?  Estimates of the UDG size are given below.  Here is a summary:

* UDG is a hypergraph which contains all relationships between all known SWIDs in the Spatial Web.
* How many SWIDs might there be in the Spatial Web: approximately 10^14^
** Current large knowledge graphs (Microsoft): is on the order of 10^12^ entities
** Wikipedia is 6*10^7^
** Embedding H3 DGGS into UDG that would be 10^14^ hexagons
* Query performance
** H3 grid/hash queries by Databricks
** Geographic query bigger than a set of buildings in the US is too big. 2.5*10^8^

==== Existing large knowledge graphs

The UDG is similar to existing, proprietary knowledge graphs.

https://cacm.acm.org/practice/industry-scale-knowledge-graphs/[Industry-Scale Knowledge Graphs in ACM Communications 2019]
provides a summary of large existing knowledge graphs.  These knowledge graphs
may have grown a handful of orders of magnitude since 2019 when the size of each
was:

* Microsoft’s knowledge graph:  approximately 2 billion primary entities,  2*10^9^ entities as of 2019.
* 2023 estimate of large knowledge graphs 10^12^ entities


As of September 2025, the contents of
https://en.wikipedia.org/wiki/Wikipedia:Size_of_Wikipedia[Wikipedia] were:

* English articles 7,063,252 (roughly 7*10^7^)
* Total wiki pages: 64,128,394



==== Geographic H3 index

The H3 geospatial indexing system is a discrete global grid system (see Sahr et al., 2003) consisting of a multi-precision hexagonal tiling of the sphere with hierarchical indexes.   H3 was developed to address the challenges of Uber's data science needs. H3 is now open source under the Apache 2 license.

H3 is a hierarchical geospatial index. Hexagonal cells at level 12 have an area of 90 dm2 and there are 5.7*10^14^ hexagons


==== VERSES estimate of the Spatial Web

* 2.4 trillion objects on the Earth.  2.4*10^12^
* 9.9 sextillion connections on the internet 9.9*10^21^
* 2.9 septillion connections on the spatial web 2.9*10^24^
* Square root of a septillion = approximately 10^12^


[[udg_size_estimate]]
.Estimate of the number of entities in the Spatial Web UDG
image::udg_size_estimate.png[Estimate of number of entities in the Spatial Web UDG]


=== Domains, Links and Hyperspaces

Places have an obvious containment relationship - Earth is made up of
continents, which are made up of ountries, which are made up of cities, which
are made up of even smaller divisions.

Domains are not places, though they might appear to be at first glance. A domain
has a place property that can in fact refer to multiple places. For instance,
one can make up a domain of Red States, a domain of Blue States, and possible a
domain of Purple States in the United States. It also has a Home place property
that acts as a default when the domain is referenced as the target of a link -
this can be thought of as the equivalent of a landing page (or index.html in
HTTP terms).

This creates an interesting phenomenon. The most common form of link within the
UDG is a link from one place to another place typically within the same domain.
The links exist primarily for agents, but an agent may also have the ability to
carry certain things from one place to another within a given domain.

This is different behavior from the way that a link works in HTTP. There,
activating a link sends the browser (the user agent) to a new address. With
HSTP, activating a link will typically move the agent to a new Place within the
domain. In a game environment such as Monopoly, this basically moves the agent's
token to the new place (say from Pennsylvania Ave to Boardwalk). In a game like
chess, each player in effect controls sixteen agents, one for each chess piece
on their side, though they can only control one such agent at any given turn.

This also raises an interesting quandry. Links can be contextual, and are also
not necessarily contiguous. The valid links for a knight agent, for instance, is
L shaped, and it can jump over adjacent squares, but can't jump outside of the
boundaries of the board. The bishop can only move across diagonals, and only
until it encounters a piece of the opposite's side (a capture) or a piece of the
active side (a block). This indicates that the hyperspace of a domain is
topological.

=== The Topological Hyperspace

A topological space is one in which direct physical constraints are minimized in
favor of conceptual ones. In effect, a domain consists of a set of places, each
of which is a conceptual node connected by links. The set of all places that are
traversable within the graph makeup the hyperspace for that domain, with the
links in turn controlling access from one place to another within the domain.

[source,mermaid]
----
---
config:
    layout: elk
---
graph LR
    r1[Room1]
    r2[Room2]
    r3[Room3]
    r4[Room4]
    r5[Room5]
    r6[Room6]
    r1 -->|=9758;| r2
    r1 -->|=9919;| r3
    r2 -->|=9919;| r4
    r3 -->|=9758;| r4
    r2 -->|=9758;| r3
    r4 -->|=9719;| r5
    r4 -->|=9758;| r6
----

In this case, the hyperspace for the domain consists of six "rooms", each
connected by links of various types:

* Pointers (&=9758;) represent open links - an agent can move from one room to
the next freely.

* Keys (&=9919;) represent locked links - the agent needs some form of key to
open the link and move to the next room.

* Finally, clocks (&=9719;) represents conditional locks - an external condition
(such as a store being closed for the night) must be met before traversal can
happen.

This is an example of a topological domain. It consists of six Places, but each
Place does not necessarily have to represent a physical location in the real
world. Instead, the place is simply a scope for containment. It could represent
stations in an assembly line, steps in a process, a detailed internal
representation of a given subsystem, and so forth.

The notion of linked places can be used to create an alternative for managing
holonic viewpoints. For instance, if you have a place that represents a car,
there is a link (perhaps the button that releases the latch that holds the hood
closed), which will then take you to an entry place ("room") that contains the
engine compartment, and that lets you in turn dig deeper into the engine, the
battery, the alternator and so forth.

This approach has a number of key advantages - first - you can control access to
various subsystems because they are topological just places within the overall
domain that are constrained by the links that connect them. Because links are
contextual, you can only access certain subsystem if either you (or your agent)
have the relevant key or some external condition is in force.

This also relieves the Spatial Web of having to do heavy extensive physical
mapping. This can be added back in, either by increasing the number of places to
better represent a tighter partitioning of the space, or by providing more
subtle links to create more neighborhoods (these are essentially equivlent
actions).

The hyperspace of the domain then becomes the set of all places within that
domain. This solves another problem that a more physical realization introduces
- determining whether you are at the edge of, or out of the boundaries of, a
physical space. In a topological model, if the place is not in the domain, then
it is not accessible by ANY agent.

=== Topological vs Continuous Hyperspace

The topological view is one where a domain consists of a finite number of
discrete places, each with its own SWID.

=== Domain as a map

A DOMAIN is a model. It provides context for the things within the model, and also describes a purpose for that model. It is, in a very real sense, a __map__, albeit one that is self-aware and changes dynamically over time, though the question about what a domain is a map ___of___ is something that is dependent upon the author or model maker.

Something that is central to the spatial web is that it is __not__ necessarily a reflection of reality. As with any map, a domain is an abstraction of a (typically physical) space and the entities that evolve within that space over time. For instance, one can create a domain showing the London subway system:

image::_116112246_064832377.jpg[London Subway System 2025]

The domain can even be seen as a representation showing where the individual trains are within that subway system (to a close approximation). Note that such a map is not necessarily spatially correct - it shows routes and stations, but these are not positionally correct. In this case, what you are looking at is a topological construct, simplified to show what is relevant, not necessarily what is a detailed reflection of the subway on (or in this case under) the ground.

To that end, designing a domain typically comes down to answering a number of questions:

* __What is this a map of?__ Most maps show things of significance within a given context. Why is the map being created? what is it's purpose? Just as a document exists in the world wide web to inform, entertain, record, and persuade, a domain exists in the spatial web for much the same thing.
* __Does the map change over time?__ Until recently, all maps were effectively just snapshots in time, and it has only been comparatively recently that we could create maps that capture evolution of a system over time.
* __Does the map reflect changes in the real world?__ This is a more subtle question, but an important one. Is there some form of feedback between a physical array of sensors and cameras that drive the evolution of the model, or is the driving factor in the map some form of algorithm or AI (a simulation).
* __Can changes to the map cause changes in the real world?__ Put another way, if a user of the map indicates a change be made to some entity within that map, will that change be reflected in the real world system that the map is a reflection of? Is it interactive?
* __Is the map participatory?__ Are there other agents that can change the state of the map (whether it reflects physical reality or not) and how do they interact with that map? How are changes in the map expressed back to the user.
* __Is the map linked to other maps?__ Does the map describe a comprehensive system, or is it possible to change to a different map based upon linking, tiling or similar system?
* __Does the map have multiple levels of detail (LOD)?__ Can you zoom in on an area to get more detail? Do you need to provide metadata (text and image content)? Is it dynamic?
* __Does the map have persistance?__ When an agent enters the map, will that map reflect changes made to it by others (an environment), or are changes lost between sessions (typical of tours)?
* __Who or what is the intended audience of the map?__ Is this used primarily by humans or by automated systems?

The role of the Spatial Web system is to deliver these different kinds of maps, to make them integrated and useful across a wide variety of applications. Just as the world wide web exploded the concept of a library - a collection of documents - into a world-wide phenomenon, so too does the creation of domains enable the same thing for maps as a way of perceiving and understanding the worlds, both real and imagined, around us.




=== Places

A __place__ represents a particular bounded region with a domain. The set of all places inside of a domain identifies the
__hyperspace__ of that domain.

Note that a place is a conceptual entity, not necessarily just a geophysical
one. The role of a place is to indicate _where_ a particular agent performs a
specific activity within a given domain, and an agent will always be connected
to a place, though the specific place may change from one domain to the next.

Within this context, a _tour_ can be thought of as the navigation of an agent
through various places within a given domain. The specific mechanisms for how
that agent moves from place to place are abstracted out in HSML, which is not
necessarily a high fidelity representation of the physical world. What is
important is only that the agent has moved from one operational context to
another.

As mentioned, a place is itself an agent, and is an abstraction. For instance,
suppose that you were representing a field hospital in a wartime setting. This
is a place - it is where agents perform activities - but it is not necessarily
fixed in space. When you say, "I am going to Field Hospital 4077", for
instance, what you are indicating is that you are going to a place but the
specific location of that place will vary over time.

This becomes especially important when dealing with vessels or platforms of
various sorts. A cruise ship is a place, but its position will vary. That ship,
in turn, can be decomposed (in its own subdomain) into multiple decks, rooms and
cabins, each of which are also places.

Two critical points to note:

* A domain can have just a single place. If there is no particular need to
indicate changes in spatial focus, then only one place is needed.* An agent may
specify a location on its associated place, in either ___absolute___ or
___relative____ terms.

** An __absolute location__ is one given by an absolute coordinate system such
as h3 or wgs-84, and assumes an orthogonal vector system used for specifying
position, orientation and/or extent. This is typically used for larger scale
domains, such as those on a planet. It may also be a custom tiling system where
each tile has a specific address.

** A __relative location__ is a little more complicated to define, and is
strictly speaking Euclidean. In this particular case, the domain identifies a
set of places within it and associates each place with an orthogenal vector,
along with one place that's an origin vector (a point). These places are
markers, with n + 1 markers where n is the desired dimension, and n = 0
represents the origin. Once these are defined, any place can be defined relative
to the corresponding coordinate system. Note, these do not necessarily need to
be cartesian - you can set a 2D space as (r,θ), for instance.

One advantage of using relative coordinates is that it can be used to simplify
modeling of smaller structures. For instance, suppose that you wanted to model
an apartment. You can set this up as follows:

[source]
----
[] a hsml:Domain ;
    hsml:swid did:swid:ACE11921CD587AF245 ;
    hsml:swurl <domain/standardApartment-ACE11921CD587AF245>
    hsml:hyperspace (_:origin _:x-axis :y-axis);
    hsml:hasPlaces _:livingRoom, _:kitchen, _:bedroom, _:bathroom ;
    hsml:hasHomePlace _:livingRoom ;
    .
_:origin a hsml:Place ;
    hsml:hasLocation (0 0) ;
    hsml:hasUnits <concept/units/feet> ;
    .
_:x-axis a hsml:Place ;
    hsml:hasLocation (1 0) ;
    hsml:hasUnits <concept/units/feet> ;
    .

_:y-axis a hsml:Place ;
    hsml:hasLocation (0 1) ;
    hsml:hasUnits <concept/units/feet> ;
    .

_:livingRoom a hsml:Place ;
    hsml:hasLocation (0 0) ;
    hsml:hasExtent (12 8) ;
    hsml:hasTopic <concept/Room> ;
    hsml:hasAgent [
        # door from LR to Kitchen
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (12 4);
        hsml:hasLink [
            hsml:hasTarget _:kitchen ;
        ] , [
        # door from LR to Bedroom
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (6 8) ;
        hsml:hasLink [
            hsml:hasTarget _:kitchen ;
        ]

    ],[
        # a person agent standing in to the living room
        a hsml:Agent ;
        hsml:swurl <agent/JaneDoe> ;
        hsml:hasTopic topic:Person, topic:Woman ;
        hsml:hasLocation (7,3) ;
    ].

_:kitchen a hsml:Place ;
    hsml:hasLocation (12 0) ;
    hsml:hasExtent (6 8) ;
    hsml:hasTopic <concept/Room> ;
    hsml:hasAgent [
        # door from Kitchen to LR
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (12 4);
        hsml:hasLink [
            hsml:hasTarget _:livingRoom ;
        ]
    ]
    .

_:bedroom a hsml:Place ;
    hsml:hasLocation (0 8) ;
    hsml:hasExtent (10 8) ;
    hsml:hasTopic <concept/Room> ;
    hsml:hasAgent [
        # door from LR to Bedroom
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (6 8) ;
        hsml:hasLink [
            hsml:target _:livingRoom ;
        ], [
        # door from Bedroom to Bathroom
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (10 12) ;
        hsml:hasLink [
            hsml:hasTarget _:bathroom ;
           ]
        ]
    .

_:bathroom a hsml:Place ;
    hsml:hasLocation (10 8) ;
    hsml:hasExtent (8 8) ;
    hsml:hasTopic <concept/Room> ;
    hsml:hasAgent [
        # door from Bedroom to Bathroom
        a hsml:Agent ;
        hsml:hasTopic topic:Door ;
        hsml:hasLocation (10 12) ;
        hsml:hasLink [
            hsml:hasTarget _:bathroom ;
           ]
        ]
    .
----

This can be interpreted as follows:

.Apartment Floorplan
image::apartment_floorplan-1-svg-08-16-2025_12_34_PM.png[]

Several key points:


* _None of this has been normalized yet within the working group, so may
change._

* The () notation indicates an ordered linked list, which is used for any
ordered sequence of items in RDF.

* The use of the blank node (underscore notation) is to create local identifiers
rather than global identifiers, and will be replaced by system scope identifiers
when loaded into the graph.

* Hyperspace here is identified by three places - an origin and two orthogonal
vectors.

* Units are treated as conceptual entities in the taxonomy and are defined at
the level of the spatial web node. If units are not included, then the default
is an undifferentiated unit.

* The domain identifies the active places within the system (coordinate axes are
usually not included as they don't normally take active agents).

* Each place has a location that identifies where it is relative to either a
global coordinate system or a custom (relative) system.

* Agents are attached to places via the hsml:hasAgent predicate. In this
particular case, the agents are doors with attached links that allow for transit
between two rooms. Note that the door or portal agents have locations within the
local coordinate system (and can have extents, though they are not necessary
here). There is an additional icon showing a person and their current position
within the apartment.

* The `hsml:hasExtent` predicate identifies the boundaries of a place. Note that
such boundaries may be multi-dimensional in nature, and may be specified in a
number of different ways. The `hsml:hasTopic` predicate can be used to clarify
how this boundary is expressed, as indicated in the section
link:#extending-entities[Extending Entities].