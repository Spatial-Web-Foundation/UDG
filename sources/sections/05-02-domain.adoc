[[domains]]
= DOMAINS are the primary ENTITY in the UDG

== ENTITIES are the basic type for all knowledge in the UDG

The UDG KG is composed of Spatial Web ENTITIES.  An ENTITY is that which is perceived, known, or inferred to exist, has existed, or is anticipated to exist.  ENTITIES are of several types as shown in the <<hsml_ontology>> which are the primary concepts used across the Spatial Web and in the Hyperspace Modeling Language (HSML).  HSML implements the Spatial Web ontology as a set of schemas that enable increased coherence across diverse datasets without sacrificing flexibility.  

[[spatial_web_ontology]]
.Spatial Web ontology
image::spatial_web_ontology.png[ontology showing Spatial Web entities and their relations]


== SWIDS and Aliases

=== SWIDs

All ENTITIES in the UDG KG have a __Spatial Web Identifier__  known as a __SWID__. The SWID serves a number of purposes:

* A SWID is a decentralized identifier (DID) for digital identity devoid of any type of centralization (see <<w3c_did>>)
* The SWID identifies the ENTITY uniquely within the Spatial Web. In this regard, the SWID acts as an (indirect) IRI.
* SWIDs are also used to establish links between resources. 
* SWIDs are also used to resolve __nodelink__ connections between different nodes in the SW Node Graph, making it possible to bind together nodes in networks. In this case, the __nodelink document__ identifies both authentication and address information for different nodes within the spatial web.

=== Aliases

In the Spatial Web, one or more *__aliases__* can be assigned to a SWID that is intended to locate a resource, but the actual "physical" address for the resource is contained within the SWID Document. In effect, the alias is analogous to a HTTP domain name mapping to an IPV6 address, but in this case the "domain name" alias maps to a SWID, which then maps to the corresponding IPV6.

[[fig-swid-alias]]
.SWID Alias
image::SWID-alias.png[SWID Alias]

// [source,mermaid]
// ----
// flowchart LR
// Alias --> SWID1 --> doc["Verifiable<br>Credential"]
// doc --> SWNode[Spatial Web Node]
// doc --> Domain[Reference Domain]
// ----


EDITOR:  The specific form of aliases is still to be determined. To be consistent with other SWF specificaitons, the figure may need to be revised, inserting "SWID Document"  between SWID1 and "Verifiable Credential." 


== Definition of a DOMAIN

A DOMAIN is the fundamental class within the UDG for describing the various things, agents, and places that make up the Spatial Web. Every structure, building, planet, character (agent), animal, mystical alien pyramid or similar construct, is ultimately a DOMAIN, and is addressable within the context of the Spatial Web.

A DOMAIN is an ENTITY that may identify the context for an ACTIVITY for or by an AGENT at a specific place acting upon various things within that DOMAIN. Everything that happens within the UDG happens within a DOMAIN.

A DOMAIN is required to have these attributes:

* a SWID, a form of decentralized identifier that can be used to identify the domain uniquely within the Spatial Web.
* A DOMAIN Type, which indicates the particular role that the domain plays. This identifies how the domain is classified within the Spatial Web. Note that a DOMAIN can be defined by multiple different ontologies, but it _must_ have the domain type.

A DOMAIN may have other other attributes, but these are not required:

* A __location__, which identifies the entity's position in HYPERSPACE, relative to either the containing DOMAIN, or to an externally defined DOMAIN. If a domain exists solely as a vehicle for containment, then location is not specifically required, though it often contains additional state information that is not strictly speaking positional.
* Zero or more ACTIVITIES, which provids operational instructions for the entity in question. 
* Zero or more __style__ resources, which provides a mechanism for rendering the DOMAIN with different content types. _EDITOR:  this has not been formally proposed yet, and may be removed.
* Zero or one __link__ references to an external DOMAIN. Some ENTITIES provide a link that can be activated through certain interfaces or affordances. This is a simple link, meaning it changes the context (DOMAIN) of the agent initiating the link without specific constraints, which is analogous to an HTTP standard hyperlink. More information about links will be covered in the subsection <<links,Links>>.


== DOMAIN types

A DOMAIN type is a specialization of a DOMAIN that incorporates additional capabilities.  <<IEEE Std 2874>> defines several DOMAIN types:


[[domain-types-based-on-their-defining-characteristics]]
.Domain types based on their defining characteristics
[%autowidth]
|===
|Type of Domain |Description

|Geographic
|Implicitly or explicitly associated with a location
|Concept
|Intangible concepts and abstract ideas shared by a community of users
|Organization
|Pertaining to membership within an entity
|Agent
|Individual domains with active states and agency
|Person
|Special subtype of agent maintaining a self-sovereign identity
|Thing
|Bounded items without agency
|===


EDITOR: the additional concepts related to DOAMIN types is under review.

Additional concepts are being considered relevant to DOMAIN types. These are differentiated as follows:

* A __link__ is a mechanism for navigating between both places (internal links) and domains (external links). It is the analog of a hypertext link in the HTTP world.Cf. <<links,Links>> for more information.

* A __sensor__ is an abstraction of a camera, recording device, eyeball, etc. Its purpose is to provide a reference point of view for an entity within a domain (or of the domain itself).  Cf. <<sensors,Sensors>> for more information.

* An __assemblage__ is an aggregate structure of things, places, and agents. It is intended to model corporations, institutions, governments, and so forth, but it can also model physical or other composite structures.  Cf. link:#assemblages[Assemblages] for more information.


== DOMAIN modeling checklist

A DOMAIN provides the answers to a number of key questions about the system in question.

* __Where?__. Where (what place) does the action within the system take place?
* __How Is Space Defined?__ What are the relevant places of relevance within the system (it's hyperspace).
* __How Is Spae Connected?__. How are things within the domain connected, and how are domains connected to other domains?
* __What Happened?__. Is it possible to retrieve a history of what happened within the domain over time?
* __What Kind?__. What classifications apply to the domain?
* __Who?__. Which agents are participating within the domain?
* __When?__. When does the activity take place within the context of the domain. This becomes especially critical for asynchronous events.
* __What Happened?__. Is it possible to retrieve a history of what happened within the domain over time?
* __How?__. What are the activities that can be accomplished within the domain, and how are these activated?
* __Why?__. What are the goals or purposes of the domain, and what happens when those goals are achieved?


DOMAINS may be references using hyperspace including time. DOMAINS usually have a specific start time (or other condition) and end time (or other condition).

In general, a domain has a schematic representation that can be extended from a core domain type. This identifies the relevant state variables and properties for the domains beyond the properties of the Domain base class. Domains are entities in that they have SWIDs, but they are in effect system (or holonic) entities.

== Extending Entities

While the Spatial Web makes use of the Domain Types defined in <<IEEE Std 2874>>, those types may need to be extended to model the complexity of all worlds.  A framework is defined that can identify nodes contextually using topics and state dependencies. For instance, suppose that you wanted to add a property to a given country called population. In this case, a property node can be added using SHACL.

----
[] a hsml:Domain ;
    hsml:hasShape [
        a sh:NodeShape ;
        sh:targetClass hsml:Place ;
        sh:property [
            a sh:PropertyShape ;
            sh:path ex:population ;
            sh:nodeKind sh:Literal ;
            sh:datatype xsd:nonNegativeInteger;
            sh:minOccurs 0 ;
            sh:maxOccurs 1 ;
        ],[
            a sh:PropertyShape ;
            sh:path hsml:hasTopic ;
            sh:nodeKind sh:IRI ;
            sh:class hsml:Topic ;
            sh:value <#concept/Country> ;
        ]
     ] .
----

In this case, the domain holds the shape definitions via the `hsml:hasShape` property, and when the domain is instantiated, this provides information to the system about how the given property or properties are implemented.

For instance, in this particular case, the place (a country) is defined with a property `ex:population` as well as a second property `hsml:hasTopic`. The first is considered valid if it has a nonNegative integer (and is an optional parameter), the second is considered valid if the hsml:hasTopic property has the value <concept/Country>. If either of these are not true for the place, then the structure generates an error for the shape.

Within the graph, then, this would be applied to the Canada place node as follows:

----
[] a hsml:Place ;
    hsml:swid did:swid:0CANADA ;
    hsml:swurl <#country/Canada> ;
    hsml:hasTopic <#concept/Country> ;
    ex:population 32159219 ;
    .
----

This makes it possible to add any number of properties to entities within the domain in question, as well as to set constraints that more accurately specify things such as topicality or state configurations.

Note that common shapes can be bound specifically to reference domains and included or imported, as specified in the section
link:#importing-taxonomies-and-schemas[Importing Taxonomies and Schemas].
