[[domains]]
= DOMAINS are the primary ENTITY in the UDG

== ENTITIES are the basic type for all knowledge in the UDG

The UDG KG is composed of ENTITIES. An ENTITY is that which is perceived, known, or inferred to exist, has existed, or is anticipated to exist. ENTITIES are of several types as shown in the <<hsml_ontology>>, which are the primary concepts used across the Spatial Web and in the Hyperspace Modeling Language (HSML). HSML implements the Spatial Web ontology as a set of schemas that enable increased coherence across diverse datasets without sacrificing flexibility.  

[[spatial_web_ontology]]
.Spatial Web ontology
image::spatial_web_ontology.png[ontology showing Spatial Web entities and their relations]


It is certain that there will be inconsistencies in the UDG, similar to inconsistencies in the WWW. Some inconsistencies will be from relationships between DOMAINS. Other inconsistencies will be the result of the content of DOMAINS in the UDG.  UDG operations must be resilient to inconsistencies in the relationships between nodes and the content of nodes.


== Definition of DOMAIN

DOMAIN is the fundamental class within the UDG for describing the various things, agents, and locations that make up the Spatial Web. Every structure, building, planet, character, animal, mystical alien pyramid or similar construct, is ultimately a DOMAIN.

A DOMAIN is an ENTITY that may identify the context for an ACTIVITY for or by an AGENT at a specific place acting upon various things within that DOMAIN. Everything that happens within the UDG happens within a DOMAIN.

A DOMAIN is required to have these attributes:

* *SWID* a decentralized identifier used to uniquely identify DOMAINS within the UDG.
* *DOMAIN Type* indicates the particular role that the domain plays.  DOMAIN may be characterized by multiple different ontologies, but it _must_ have DOMAIN type.

A DOMAIN may have these other attributes:

* *Location* identifies the entity's position in HYPERSPACE, relative to either the containing DOMAIN, or to an externally defined DOMAIN. If a domain exists solely as a vehicle for containment, then location is not specifically required.
* *ACTIVITIES* provides operational instructions for the ENTITY in question. 
* *style resources* provides guidance for rendering the DOMAIN with different content types. 
* *link* to an external DOMAIN. Some ENTITIES provide a link that can be activated through certain interfaces or affordances. This is a simple link, meaning it changes the context (DOMAIN) of the agent initiating the link without specific constraints, which is analogous to an HTTP standard hyperlink. More information about links will be covered in the subsection <<links,Links>>.


== DOMAIN types

A DOMAIN type is a specialization of a DOMAIN that incorporates additional capabilities.  <<IEEE Std 2874>> defines several DOMAIN types:


[[domain-types-based-on-their-defining-characteristics]]
.Domain types based on their defining characteristics
[%autowidth]
|===
|Type of Domain |Description

|Geographic
|Implicitly or explicitly associated with a location
|Concept
|Intangible concepts and abstract ideas shared by a community of users
|Organization
|Pertaining to membership within an entity
|Agent
|Individual domains with active states and agency
|Person
|Special subtype of agent maintaining a self-sovereign identity
|Thing
|Bounded items without agency
|===



== DOMAIN modeling checklist

This checklist is provided to aid in modeling a DOMAIN to be included in the UDG KG.

* __Where?__. Where does the action take place?
* __How Is Space Defined?__ What is the relevant hyperspace of relevance within the system.
* __How Is the DOMAIN Connected?__. How are ENTITIES within the DOMAIN connected, and how are DOMAINS connected to other DOMAINS?
* __What Happened?__. Is it possible to retrieve a history of what happened within the domain over time?
* __What Kind?__. What classifications apply to the domain?
* __Who?__. Which agents are participating within the domain?
* __When?__. When does the activity take place within the context of the domain. This becomes especially critical for asynchronous events.
* __What Happened?__. Is it possible to retrieve a history of what happened within the domain over time?
* __How?__. What are the activities that can be accomplished within the domain, and how are these activated?
* __Why?__. What are the goals or purposes of the domain, and what happens when those goals are achieved?

DOMAINS may be references using hyperspace including time. DOMAINS usually have a specific start time (or other condition) and end time (or other condition).

A DOMAIN may have a schematic representation that can be extended from a core DOMAIN type. The core identifies the relevant properties for the DOMAIN beyond the properties of the DOMAIN base class. 

== Extending Entities

While the Spatial Web makes use of the DOMAIN Types defined in <<IEEE Std 2874>>, those types may need to be extended to model the complexity of all use cases. A framework is defined that can identify nodes contextually using topics and state dependencies. If a use case needs to add a property, the property can be added using SHACL.

----
[] a hsml:Domain ;
    hsml:hasShape [
        a sh:NodeShape ;
        sh:targetClass hsml:Place ;
        sh:property [
            a sh:PropertyShape ;
            sh:path ex:population ;
            sh:nodeKind sh:Literal ;
            sh:datatype xsd:nonNegativeInteger;
            sh:minOccurs 0 ;
            sh:maxOccurs 1 ;
        ],[
            a sh:PropertyShape ;
            sh:path hsml:hasTopic ;
            sh:nodeKind sh:IRI ;
            sh:class hsml:Topic ;
            sh:value <#concept/Country> ;
        ]
     ] .
----

As illustrated below, the DOMAIN holds the shape definitions via the `hsml:hasShape` property, and when the DOMAIN is instantiated, this provides information about how the given property or properties are implemented.

In the example, the place (a country) is defined with a property `ex:population` as well as a second property `hsml:hasTopic`. The first is considered valid if it has a nonNegative integer (and is an optional parameter), the second is considered valid if the hsml:hasTopic property has the value <concept/Country>. If either of these are not true for the place, then the structure generates an error for the shape.

Within the graph, then, this would be applied to the Canada place node as follows:

----
[] a hsml:Place ;
    hsml:swid did:swid:0CANADA ;
    hsml:swurl <#country/Canada> ;
    hsml:hasTopic <#concept/Country> ;
    ex:population 32159219 ;
    .
----

This makes it possible to add any number of properties to the DOMAIN, as well as to set constraints that more accurately specify things such as topicality or state configurations.

== SWIDS and Aliases

=== SWIDs

All ENTITIES have a Spatial Web Identifier (SWID) which may:

* Serve as decentralized identifier (DID) for digital identity devoid of any type of centralization (see <<w3c_did>>)
* Identify the ENTITY uniquely within the Spatial Web. In this regard, the SWID acts as an (indirect) IRI.
* Establish links between ENTITIES.
* Resolve connections between different nodes in the UDG KG. The nodelink document identifies both authentication and address information for different nodes within the spatial web.

=== Aliases

In the Spatial Web, one or more aliases can be assigned to a SWID that is intended to locate a resource, but the address for the resource is contained within the SWID Document. The alias is analogous to an HTTP domain name mapping to an IPV6 address, but in this case, the "domain name" alias maps to a SWID.

[[fig-swid-alias]]
.SWID Alias
image::SWID-alias.png[SWID Alias]

// [source,mermaid]
// ----
// flowchart LR
// Alias --> SWID1 --> doc["Verifiable<br>Credential"]
// doc --> SWNode[Spatial Web Node]
// doc --> Domain[Reference Domain]
// ----


EDITOR:  The specific form of aliases is still to be determined. To be consistent with other SWF specificatons, the figure may need to be revised, inserting "SWID Document" between SWID1 and "Verifiable Credential." 

Internally, all resources within the Spatial Web are identied by SWIDs. However, such SWIDs exist primarily to identify identity and assertion credentials, and are usually not "human readable". In this regard, the SWID is somewhat analogous to an IPV6 address in that it identifies a specific enitity or domain in the network exclusively.

An __alias__ on the other hand, is more user-friendly, and can be used to identify entities and domains SWIDs are generated by SWID Nodes directly, but aliases are more like _HTTP domain names_: they put a human readable name on the resource.

The precise mechanism for (and structure of) spatial web aliases has not yet been worked out, though it will likely be similar in scope and structure to ICANN. The specific node authority (the person or organization who owns the node) can claim a "domain name" that can be segmented based upon a common authority. For instance, SWRA might have an alias for Earth of the form:

hstp:org:swra:Place:Earth

which would then be associated with the SWID

did:swid:c124151stqwf98cjjklm

Another organization (such as the aforemention UPNA) may then create an association through their own alias to the SWRA alias:

----
hstp:gov:upna:Place:Earth
    Place:isAnalogOf hstp:org:swra:Place:Earth
----

Aliases can also be applied from different protocols. For instance, UPNA might use an HTTP-based URL as an allias:

----
http://sw.upna.gov/Place/Earth
----

This would map to the credential endpoint for the registry, which would then
retrieve the credential to the relevant entity as a document. If this was called
from a Spatial Web web client, then the retrieval of this credential can be used
to determine additional actions, from retrieval of metadata to linking to that
place within a given spatial web node. The specific actions are still to be
determined.

== Requirements and recommendations

TBD
