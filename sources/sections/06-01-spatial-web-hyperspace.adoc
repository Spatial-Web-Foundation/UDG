= Spatial Web Hyperspace

== Classes of hyperspace

The Spatial Web hyperspace ENTITY provides the fundamental organizing method for entities in the UDG. To enable this role, <<IEEE_2874_2025, Spatial Web clause 6.2.3.7>> provides a formal definition of hyperspace, as any set whose elements are related by a formal notion of _path_.  The basic classes of hyperspace include: Graphs including Cellular spaces and Vector spaces with coordinate systems.


[[basic-classes-of-hyperspace]]
.Basic classes of hyperspace
image::hyperspace_basic_classes.png[Basic classes of hyperspace and their relationships]

The <<IEEE_2874_2025, Spatial Web Protocol Architecture and Governance>> standard defines concepts for hyperspace summarized here for convienence:

* Classes of hyperspace: graphs, vector spaces, hypergraphs, abstract data types.  
* Hyperspaces of spaces: where a point of a space is a space of the corresponding type
* Cellular spaces: in which cells of a chosen type are connected according to a schema.
* Geographic spaces: locations relative to the Earth
* Time in hyperspace: as a dimension, as a duration, as a trajectory 
* Structures: origin, dimension, metric, similarity, norm and inner product
* Operations: products, sums, subspaces
* Connecting spaces: points in common to multiple subspaces, i.e., Portal.

== Hyperspace attributes

DOMAINS are represented in hyperspace by identifying the type of hyperspace and the location of the DOMAIN in the hyperspace. 

Location is a key attribute of HYPERSPACE.  Location identifies a specific coordinate or index value in a hyperspace. The Location attribute takes on a specific form based on the class of hyperspace: cell index for a cellular space, coordinate value for a coordinate reference system.  See the HSML Implementation Specification for the controlled attributes for location. 

Geometries are mathematical objects in the vector space class of hyperspace. ENTITIES in a vector space may have  a hyperspace:spatialProperty of geo:hasGeometry.  A geometry may be a single point location or it may be a geometric structure like a polygon or sphere in any number of dimensions.

ENTITIES as features may have attributes of location hyperspace as well as other attributes not associated with hyperspace.  This is similar to a Geographic Feature where location is one of several types of attributes associated with a geographic feature.  The existence of a feature is independent of any specific geometric representation associated with the feature.  A feature may have multiple geometries as attributes depending for example on scale it may be associated with a point or a complex polygon.  For example, a city may be have a point attribute and it may also have the city's boundary as a location in hyperspace.

== Topological vs geometric representations

Geometry is concerned with properties of space such as the distance, shape, size, and relative position of entities. Topology is concerned with properties that are invariant when an entity is deformed, e.g., stretching, twisting, crumpling, and bending.

For a topological space, DOMAINS consists of a set of places, each of which is a conceptual node connected by links. The set of all places that are traversable within the graph makeup the hyperspace for that domain, with the links in turn controlling access from one place to another within the domain. Relationships between entities in topological space and geometric space are expressed in the Poincar√© duality.

<<topological_rooms_building>> is an example of a topological representation of a domain: a building with several rooms. It consists of six DOMAINS, but each DOMAIN does not necessarily have to represent a physical location in the real world. Instead, the DOMAIN has a geometry that is the boundary of the room. It could represent stations in an assembly line, steps in a process, a detailed internal represntation of a given subsystem, and so forth.

[[topological_rooms_building]]
.Topological relationships of rooms in a building
image::topological_rooms_building.png[Topological relationships of rooms in a building]


// [source,mermaid]
// ----
// ---
// config:
//    layout: elk
// ---
// graph LR
//    r1[Room1]
//    r2[Room2]
//    r3[Room3]
//    r4[Room4]
//    r5[Room5]
//    r6[Room6]
//    r1 -->|=9758;| r2
//    r1 -->|=9919;| r3
//    r2 -->|=9919;| r4
//    r3 -->|=9758;| r4
//   r2 -->|=9758;| r3
//    r4 -->|=9719;| r5
//  r4 -->|=9758;| r6
// ----

In this case, the hyperspace for the domain consists of six "rooms", each connected by links of various types:

* Pointers (&=9758;) represent open links - an agent can move from one room to the next freely.

* Keys (&=9919;) represent locked links - the agent needs some form of key to open the link and move to the next room.

* Finally, clocks (&=9719;) represents conditional locks - an external condition (such as a store being closed for the night) must be met before traversal can happen.

Access to various domains can e controlled as they are within the overall domain that are constrained by the links that connect them. Because links are contextual, only certain subsystem can be accessed if the AGENT has the relevant key or some external condition is in force.

The hyperspace of the domain then becomes the set of all domains within that domain. This solves another problem that a more physical realization introduces - determining whether the AGENT is at the edge of, or out of the boundaries of, a
physical space. In a topological model, if the place is not in the domain, then it is not accessible by ANY agent.

Another example of a topological representation is to use a cellular space.  For example, consider a domain that represents a game (an instance) of _chess_. There are 66 potential cells where a given piece can be located - the 64 squares that make up an 8x8 chessboard, and two cache areas, one for each player, where pieces that are removed are located.

.Chess board with algebraic notation
image::SCD_algebraic_notation.svg[Chess Board, using algebraic notation and the initial starting position for the black pieces]

Each of these cells has a distinct identifier that makes up its address, and, within the scope of a particular game of chess, is considered unique. Note that the places here are not globally unique - the same position may be used across multiple games across multiple servers - but within the context of its domain, it IS unique.

Notations for each of the two caches are defined - White Cache (WC) and Black Cache (BC) - for pieces that are outside the formal scope of the board but nonetheless represent the location of a specific piece. If I move the White Queen (WQ) to e4, then that piece is now located in the cell 4 units up from the White queen's side of the board and five units (e) from the left edge of the board.

The hyperspace here is ONLY these particular squares (or caches). Position j17 cannot be occupied because such a position, while plausable, does not exist within the set of all permissible places in the hyperspace.

Movement from cell to cell within a domain does not have to follow contiguity rules. The knight in particular is very constrained in where it can go (if the knight is on e4, than it can go to d6, f6, c3, c5, g3, g5, d2 or f2, but it cannot go to d4 or f4, which are contiguous to it ), but can also move over other pieces so long as the target place is not occupied by a piece of their own color.

A Spatial Web Domain is not a perfect reproduction of the real world. The knight cannot move within its cell in this particular domain (though a representation could move within that square, it's not something that is considered in the model).

Consider a hexagonal tiling of a space, as may be considered by a table top war game. The addressing in this space is more complex, because each hexagon has a particular index (address) that can be derived from some particular algorithm. The link:https://h3geo.org[H3 System] system used by Uber is an illustration of such a tiling system on a sphere.

.Hexagonal tiling
image::st_hexagongrid01.png[Hexagonal tiling]


== Requirements and recommendations

TBD







